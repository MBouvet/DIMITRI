<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Thu Jul  4 16:01:31 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>get_dimitri_template.pro (Documentation for /home/marrabld/projects/DIMITRI_2.0/Source/)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="get_dimitri_template.pro (Documentation for /home/marrabld/projects/DIMITRI_2.0/Source/)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><span class="comments">;**************************************************************************************</span>
<span class="comments">;**************************************************************************************</span>
<span class="comments">;*</span>
<span class="comments">;* NAME:</span>
<span class="comments">;*      GET_DIMITRI TEMPLATE       </span>
<span class="comments">;* </span>
<span class="comments">;* PURPOSE:</span>
<span class="comments">;*      RETURNS THE DATABASE STRUCTURE, HEADER OR TEMPLATE DEPENDING ON KEYWORD</span>
<span class="comments">;* </span>
<span class="comments">;* CALLING SEQUENCE:</span>
<span class="comments">;*      RES = GET_DIMITRI_TEMPLATE(NB_FILES)      </span>
<span class="comments">;* </span>
<span class="comments">;* INPUTS:</span>
<span class="comments">;*      NB_FILES - THE NUMBER OF INPUT FILES. </span>
<span class="comments">;*</span>
<span class="comments">;* KEYWORDS:</span>
<span class="comments">;*      DB        - SET TO RETRIEVE THE DATABASE STRUCTURE </span>
<span class="comments">;*      HDR       - SET TO RETRIEVE THE DATABASE HEADER</span>
<span class="comments">;*      TEMPLATE  - SET TO RETRIEVE THE DATABASE TEMPLATE</span>
<span class="comments">;*      FORMAT    - SET TO RETRIEVE THE DATABASE FORMAT</span>
<span class="comments">;*      VERBOSE   - PROCESSING STATUS OUTPUTS</span>
<span class="comments">;*      </span>
<span class="comments">;* OUTPUTS:</span>
<span class="comments">;*      A STRUCTURE, HEADER OR TEMPLATE DEPENDING ON KEYWORDS </span>
<span class="comments">;*</span>
<span class="comments">;* COMMON BLOCKS:</span>
<span class="comments">;*      NONE</span>
<span class="comments">;*</span>
<span class="comments">;* MODIFICATION HISTORY:</span>
<span class="comments">;*      22 NOV 2010 - C KENT    - DIMITRI-2 V1.0</span>
<span class="comments">;*      01 DEC 2010 - C KENT    - ADDED VERBOSE KEYWORD</span>
<span class="comments">;*      02 DEC 2010 - C KENT    - UPDATED HEADER INFORMATION</span>
<span class="comments">;*      08 MAR 2012 - C KENT    - ADDED ROI COVER</span>
<span class="comments">;*</span>
<span class="comments">;* VALIDATION HISTORY:</span>
<span class="comments">;*      01 DEC 2010 - C KENT    - WINDOWS 32-BIT MACHINE IDL 7.1: COMPILATION SUCCESSFUL,</span>
<span class="comments">;*                                VERBOSE COMMENTS,TESTED NB_FILES ERROR CATCH,</span>
<span class="comments">;*                                DATABASE STRUCTURE RETRIEVAL,HEADER RETRIEVAL,</span>
<span class="comments">;*                                TEMPLATE RETRIEVAL,FORMAT RETRIEVAL,NO_KEYWORD ERROR  </span>
<span class="comments">;*      12 APR 2011 - C KENT    - LINUX 64-BIT IDL 8.0: NOMINAL COMPILATION AND OPERATION</span>
<span class="comments">;*</span>
<span class="comments">;**************************************************************************************</span>
<span class="comments">;**************************************************************************************</span>

FUNCTION GET_DIMITRI_TEMPLATE,NB_FILES,DB=DB,HDR=HDR,TEMPLATE=TEMPLATE,FORMAT=FORMAT,VERBOSE=VERBOSE

<span class="comments">;-----------------------------------------</span>
<span class="comments">; CHECK NUMBER OF FILES SUPPLIED</span>

  IF NB_FILES LT 1 THEN BEGIN
    PRINT, 'DIMITRI_TEMPLATE: ERROR, NUMBER OF FILES SET TO BELOW 1'
    RETURN,-1
  ENDIF

<span class="comments">;-----------------------------------------</span>
<span class="comments">; IF REQUESTED, DEFINE AND RETURN THE DATABASE STRUCTURE</span>

  IF KEYWORD_SET(DB) THEN BEGIN
    IF KEYWORD_SET(VERBOSE) THEN PRINT,'DIMITRI_TEMPLATE: RETRIEVING DATABASE STRUCTURE'
    DB_DATA = {$
              DIMITRI_DATE        : STRARR(NB_FILES),$
              REGION              : STRARR(NB_FILES),$
              SENSOR              : STRARR(NB_FILES),$
              PROCESSING_VERSION  : STRARR(NB_FILES),$
              YEAR                : INTARR(NB_FILES),$
              MONTH               : INTARR(NB_FILES),$
              DAY                 : INTARR(NB_FILES),$
              DOY                 : INTARR(NB_FILES),$
              DECIMAL_YEAR        : DBLARR(NB_FILES),$
              FILENAME            : STRARR(NB_FILES),$
              ROI_COVER           : INTARR(NB_FILES),$
              NUM_ROI_PX          : DBLARR(NB_FILES),$
              AUTO_CS             : DBLARR(NB_FILES),$
              MANUAL_CS           : INTARR(NB_FILES),$
              AUX_DATA_1          : STRARR(NB_FILES),$
              AUX_DATA_2          : STRARR(NB_FILES),$
              AUX_DATA_3          : STRARR(NB_FILES),$
              AUX_DATA_4          : STRARR(NB_FILES),$
              AUX_DATA_5          : STRARR(NB_FILES),$
              AUX_DATA_6          : STRARR(NB_FILES),$
              AUX_DATA_7          : STRARR(NB_FILES),$
              AUX_DATA_8          : STRARR(NB_FILES),$
              AUX_DATA_9          : STRARR(NB_FILES),$
              AUX_DATA_10         : STRARR(NB_FILES) $
            }
     <span class="comments">;IF KEYWORD_SET(VERBOSE) THEN HELP,DB_DATA</span>
     RETURN, DB_DATA
   ENDIF

<span class="comments">;-----------------------------------------</span>
<span class="comments">; IF REQUESTED, DEFINE AND RETURN THE DATABASE HEADER</span>

  IF KEYWORD_SET(HDR) THEN BEGIN
    IF KEYWORD_SET(VERBOSE) THEN PRINT,'DIMITRI_TEMPLATE: RETRIEVING DATABASE HEADER'
    DB_HEAD =  STRING('DIMITRI_DATE;REGION;SENSOR;PROCESSING_VERSION;'+$
                      'YEAR;MONTH;DAY;DOY;DECIMAL_YEAR;'+$
                      'FILENAME;ROI_COVER;NUM_ROI_PX;AUTO_CS;MANUAL_CS;'+$
                      'AUX_DATA_1;AUX_DATA_2;AUX_DATA_3;AUX_DATA_4;AUX_DATA_5;'+$
                      'AUX_DATA_6;AUX_DATA_7;AUX_DATA_8;AUX_DATA_9;AUX_DATA_10')
    IF KEYWORD_SET(VERBOSE) THEN HELP, DB_HEAD
    RETURN, DB_HEAD
  ENDIF

<span class="comments">;-----------------------------------------</span>
<span class="comments">; IF REQUESTED, DEFINE AND RETURN THE DATABASE TEMPLATE</span>

  IF KEYWORD_SET(TEMPLATE) THEN BEGIN
    IF KEYWORD_SET(VERBOSE) THEN PRINT,'DIMITRI_TEMPLATE: RETRIEVING DATABASE TEMPLATE'
    DB_NAME=['DIMITRI_DATE','REGION','SENSOR','PROCESSING_VERSION',$
             'YEAR','MONTH','DAY','DOY','DECIMAL_YEAR',$
             'FILENAME','ROI_COVER','NUM_ROI_PX','AUTO_CS','MANUAL_CS',$
             'AUX_DATA_1','AUX_DATA_2','AUX_DATA_3','AUX_DATA_4','AUX_DATA_5',$
             'AUX_DATA_6','AUX_DATA_7','AUX_DATA_8','AUX_DATA_9','AUX_DATA_10']

    DB_TYPE=[7,7,7,7,  $
             3,3,3,3,5,$
             7,3,5,5,3,  $
             7,7,7,7,7,$
             7,7,7,7,7 ]  
    
    DB_TEMPLATE={    VERSION        : 1.0                       , $
                     DATASTART      : 1 , $
                     DELIMITER      : ';' , $
                     MISSINGVALUE   : !values.f_NaN, $
                     COMMENTSYMBOL  : ''          , $
                     FIELDCOUNT     : N_ELEMENTS(DB_NAME), $
                     FIELDTYPES     : DB_TYPE, $
                     FIELDNAMES     : DB_NAME, $
                     FIELDLOCATIONS : INDGEN(N_ELEMENTS(DB_NAME)), $
                     FIELDGROUPS    : [INDGEN(N_ELEMENTS(DB_NAME))]}
    <span class="comments">;IF KEYWORD_SET(VERBOSE) THEN HELP,DB_TEMPLATE       </span>
    RETURN, DB_TEMPLATE
  ENDIF

<span class="comments">;-----------------------------------------</span>
<span class="comments">; IF REQUESTED, DEFINE AND RETURN THE DATABASE FORMAT</span>

  IF KEYWORD_SET(FORMAT) THEN BEGIN
    IF KEYWORD_SET(VERBOSE) THEN PRINT,'DIMITRI_TEMPLATE: RETRIEVING DATABASE FORMAT CODE'
    DB_FORMAT = '(4(A,1H;),4(I4,1H;),1(D20.12,1H;),1(A,1H;),1(I3,1H;),1(D15.1,1H;),1(D6.3,1H;),1(I3,1H;),9(A,1H;),1(A))'
     IF KEYWORD_SET(VERBOSE) THEN HELP,DB_FORMAT   
    RETURN, DB_FORMAT
  ENDIF

<span class="comments">;-----------------------------------------</span>
<span class="comments">; IF NO KEYWORDS THEN RETURN AN ERROR</span>

  RETURN,-1

END
</code>
    </div>
  </body>
</html>