<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Tue Jul  2 12:50:56 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>convert_time_to_jday.pro (Documentation for /home/marrabld/projects/DIMITRI_2.0/Source/)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="convert_time_to_jday.pro (Documentation for /home/marrabld/projects/DIMITRI_2.0/Source/)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><span class="comments">;**************************************************************************************</span>
<span class="comments">;**************************************************************************************</span>
<span class="comments">;*</span>
<span class="comments">;* NAME:</span>
<span class="comments">;*      CONVERT_TIME_TO_JDAY       </span>
<span class="comments">;* </span>
<span class="comments">;* PURPOSE:</span>
<span class="comments">;*      RETURNS EITHER THE IDL JULIAN CALENDER DAY, THE NUMBER OF DAYS SINCE 2000, </span>
<span class="comments">;*      OR THE NUMBER OF DAYS SINCE THE ENVISAT LAUNCH.</span>
<span class="comments">;* </span>
<span class="comments">;* CALLING SEQUENCE:</span>
<span class="comments">;*      RES = CONVERT_TIME_TO_JDAY(IDATE)      </span>
<span class="comments">;* </span>
<span class="comments">;* INPUTS:</span>
<span class="comments">;*      IDATE - A STRING OF THE DATE AND TIME TO BE CONVERTED IN ENVISAT MPH FORMAT (E.G. '01-MAY-2005 12:56:00')      </span>
<span class="comments">;*</span>
<span class="comments">;* KEYWORDS:</span>
<span class="comments">;*      ELAUNCH - SET TO COMPUTE JULIAN DAY SINCE ENVISAT LAUNCH</span>
<span class="comments">;*      Y2000   - SET TO COMPUTE JULIAN DAY SINCE 2000/01/01</span>
<span class="comments">;*      VERBOSE - PROCESSING STATUS OUTPUTS</span>
<span class="comments">;*</span>
<span class="comments">;* OUTPUTS:</span>
<span class="comments">;*      JDAY - THE COMPUTED OUTPUT JULIAN DAY</span>
<span class="comments">;*</span>
<span class="comments">;* COMMON BLOCKS:</span>
<span class="comments">;*      NONE</span>
<span class="comments">;*</span>
<span class="comments">;* MODIFICATION HISTORY:</span>
<span class="comments">;*      14 DEC 2010 - C KENT    - DIMITRI-2 V1.0</span>
<span class="comments">;*</span>
<span class="comments">;* VALIDATION HISTORY:</span>
<span class="comments">;*      14 APR 2011 - C KENT   - WINDOWS 32-BIT IDL 7.1 AND LINUX 64-BIT IDL 8.0 NOMINAL</span>
<span class="comments">;*                               COMPILATION AND OPERATION</span>
<span class="comments">;*</span>
<span class="comments">;**************************************************************************************</span>
<span class="comments">;**************************************************************************************</span>

FUNCTION CONVERT_TIME_TO_JDAY,IDATE,ELAUNCH=ELAUNCH,Y2000=Y2000,VERBOSE=VERBOSE

  IF KEYWORD_SET(VERBOSE) THEN PRINT, 'CONVERT TIME TO JDAY: STARTING CONVERSION'

<span class="comments">;--------------------------------</span>
<span class="comments">;DEFINE Y2000 AND ELAUNCH DATES</span>
 
  IF (N_ELEMENTS(ELAUNCH)+N_ELEMENTS(Y2000)) GT 1 THEN BEGIN
    PRINT, 'CONVERT TIME TO JDAY: ERROR, BOTH ELAUNCH AND Y2000 KEYWORDS SET'
    RETURN,-1
  ENDIF
  
  OFFSET = 0
  IF N_ELEMENTS(ELAUNCH) GT 0 THEN OFFSET = JULDAY(3,1,2002,0,0,0)
  IF N_ELEMENTS(Y2000) GT 0 THEN OFFSET = JULDAY(1,1,2000,0,0,0)  
  IF KEYWORD_SET(VERBOSE) THEN PRINT, 'CONVERT TIME TO JDAY: OFFSET COMPUTED AS ',OFFSET

<span class="comments">;--------------------------------</span>
<span class="comments">;DEFINE MONTHS</span>
  
  MONTHSTR = ['JAN','FEB','MAR','APR','MAY','JUN','JUL','AUG','SEP','OCT','NOV','DEC']

<span class="comments">;--------------------------------</span>
<span class="comments">;EXTRACT DAY MONTH YEAR</span>
  
  DATE_DAY    = FIX(STRMID(IDATE,0,2)) 
  DATE_MONTH  = STRMID(IDATE,3,3)<span class="comments">;IS A STRING E.G. 'JAN' </span>
  DATE_YEAR   = FIX(STRMID(IDATE,7,4))
  DATE_HOUR   = FIX(STRMID(IDATE,12,2))
  DATE_MIN    = FIX(STRMID(IDATE,15,2))
  DATE_SEC    = FIX(STRMID(IDATE,18,2))

<span class="comments">;--------------------------------</span>
<span class="comments">;FIND INDEX OF MONTH</span>
  
  TEMP = WHERE(MONTHSTR EQ DATE_MONTH)
  IF TEMP[0] EQ -1 OR N_ELEMENTS(TEMP) GT 1 THEN BEGIN
    IF KEYWORD_SET(VERBOSE) THEN PRINT, 'CONVERT TIME TO JDAY: ERROR DURING MONTH STRING ANALYSIS'
    RETURN, -1
  ENDIF
  TEMP = TEMP+1

<span class="comments">;--------------------------------</span>
<span class="comments">;CONVERT USING JULDAY</span>

  JDAY = JULDAY(TEMP,DATE_DAY,DATE_YEAR,DATE_HOUR,DATE_MIN,DATE_SEC)-OFFSET

<span class="comments">;--------------------------------</span>
<span class="comments">;RETURN, NEW JULIAN DAY</span>

  IF KEYWORD_SET(VERBOSE) THEN PRINT, 'CONVERT TIME TO JDAY: CONVERSION SUCCESSFUL, RETURNING NEW JDAY'
  RETURN,JDAY

END
</code>
    </div>
  </body>
</html>