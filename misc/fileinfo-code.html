<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Thu Jul  4 16:01:44 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>fileinfo.pro (Documentation for /home/marrabld/projects/DIMITRI_2.0/Source/)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="fileinfo.pro (Documentation for /home/marrabld/projects/DIMITRI_2.0/Source/)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source">FUNCTION FILEINFO, FILENAME

   <span class="comments">;+</span>
   <span class="comments">; NAME:</span>
   <span class="comments">;    FILEINFO</span>
   <span class="comments">;</span>
   <span class="comments">; PURPOSE:</span>
   <span class="comments">;    Return information about a file.</span>
   <span class="comments">;</span>
   <span class="comments">; CATEGORY:</span>
   <span class="comments">;    File utilities.</span>
   <span class="comments">;</span>
   <span class="comments">; CALLING SEQUENCE:</span>
   <span class="comments">;    RESULT = FILEINFO(FILE)</span>
   <span class="comments">;</span>
   <span class="comments">; INPUTS:</span>
   <span class="comments">;    FILE    Name of file</span>
   <span class="comments">;</span>
   <span class="comments">; OPTIONAL INPUTS:</span>
   <span class="comments">;    None.</span>
   <span class="comments">;</span>
   <span class="comments">; KEYWORD PARAMETERS:</span>
   <span class="comments">;    None.</span>
   <span class="comments">;</span>
   <span class="comments">; OUTPUTS:</span>
   <span class="comments">;    An anonymous structure containing information about the file.</span>
   <span class="comments">;    The fields in the structure are as follows:</span>
   <span class="comments">;    NAME     String containing the name of the file</span>
   <span class="comments">;    EXIST    1 if file exists, 0 otherwise.</span>
   <span class="comments">;    READ     1 if file can be read, 0 otherwise.</span>
   <span class="comments">;    WRITE    1 if file can be written, 0 otherwise.</span>
   <span class="comments">;    HDF      1 if file is HDF format, 0 otherwise</span>
   <span class="comments">;             (0 if HDF API is not available).</span>
   <span class="comments">;    NETCDF   1 if file is netCDF format, 0 otherwise</span>
   <span class="comments">;             (0 if netCDF API is not available).</span>
   <span class="comments">;    SIZE     File size in bytes</span>
   <span class="comments">;             (-1 if file does not exist, or if file cannot be read).</span>
   <span class="comments">;</span>
   <span class="comments">; OPTIONAL OUTPUTS:</span>
   <span class="comments">;    None</span>
   <span class="comments">;</span>
   <span class="comments">; COMMON BLOCKS:</span>
   <span class="comments">;    None</span>
   <span class="comments">;</span>
   <span class="comments">; SIDE EFFECTS:</span>
   <span class="comments">;    None.</span>
   <span class="comments">;</span>
   <span class="comments">; RESTRICTIONS:</span>
   <span class="comments">;    Requires IDL 5.0 or higher (square bracket array syntax).</span>
   <span class="comments">;</span>
   <span class="comments">; EXAMPLE:</span>
   <span class="comments">;</span>
   <span class="comments">;;- Check an existing file</span>
   <span class="comments">;file = filepath('hurric.dat', subdir='examples/data')</span>
   <span class="comments">;help, fileinfo(file), /structure</span>
   <span class="comments">;</span>
   <span class="comments">;;- Check a new file</span>
   <span class="comments">;file = 'zztest.dat'</span>
   <span class="comments">;help, fileinfo(file), /structure</span>
   <span class="comments">;</span>
   <span class="comments">; MODIFICATION HISTORY:</span>
   <span class="comments">; Liam.Gumley@ssec.wisc.edu</span>
   <span class="comments">; http://cimss.ssec.wisc.edu/~gumley</span>
   <span class="comments">; $Id: fileinfo.pro,v 1.1 2003/06/30 20:27:21 gumley Exp $</span>
   <span class="comments">;</span>
   <span class="comments">; Copyright (C) 1999, 2000 Liam E. Gumley</span>
   <span class="comments">;</span>
   <span class="comments">; This program is free software; you can redistribute it and/or</span>
   <span class="comments">; modify it under the terms of the GNU General Public License</span>
   <span class="comments">; as published by the Free Software Foundation; either version 2</span>
   <span class="comments">; of the License, or (at your option) any later version.</span>
   <span class="comments">;</span>
   <span class="comments">; This program is distributed in the hope that it will be useful,</span>
   <span class="comments">; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
   <span class="comments">; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
   <span class="comments">; GNU General Public License for more details.</span>
   <span class="comments">;</span>
   <span class="comments">; You should have received a copy of the GNU General Public License</span>
   <span class="comments">; along with this program; if not, write to the Free Software</span>
   <span class="comments">; Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.</span>
   <span class="comments">;-</span>

   rcs_id = '$Id: fileinfo.pro,v 1.1 2003/06/30 20:27:21 gumley Exp $'

   <span class="comments">;- Check arguments</span>
   if (n_params() eq 0) then message, 'Usage: RESULT = FILEINFO(FILENAME)'
   if (n_elements(filename) eq 0) then message, 'Argument FILENAME is undefined'

   <span class="comments">;- Set default return value</span>
   result = {name:'', exist:0L, read:0L, write:0L, hdf:0L, netcdf:0L, size:-1L}

   <span class="comments">;- Get file name</span>
   result.name = filename[0]

   <span class="comments">;- Get file existence status</span>
   path = (findfile(result.name))[0]
   if (path ne '') then result.exist = 1

   <span class="comments">;- Get expanded file name, file size, and file read status</span>
   if (result.exist) then begin
     openr, lun, path, /get_lun, error=error
     if (error eq 0) then begin
       finfo = fstat(lun)
       result.name = finfo.name
       result.size = finfo.size
       result.read = 1
       free_lun, lun
     endif
   endif

   <span class="comments">;- Get file write status</span>
   if (demo_mode() eq 0) then begin
     case result.exist of
       1 : openu, lun, result.name, /get_lun, error=error
       0 : openw, lun, result.name, /get_lun, error=error, /delete
     endcase
     if (error eq 0) then begin
       finfo = fstat(lun)
       result.name = finfo.name
       if result.exist then result.size = finfo.size
       result.write = 1
       free_lun, lun
     endif
   endif

   <span class="comments">;- Get HDF status</span>
   if (result.read and hdf_exists()) then begin
     hdfid = hdf_open(result.name, /read)
     if (hdfid ne -1) then begin
       result.hdf = 1
       hdf_close, hdfid
     endif
   endif

   <span class="comments">;- Get netCDF status</span>
   if (result.read and ncdf_exists()) then begin
     catch, error_status
     if (error_status ne 0) then goto, ncdf_continue
     cdfid = ncdf_open(result.name)
     result.netcdf = 1
     ncdf_close, cdfid
     ncdf_continue:
     catch, /cancel
   endif

   <span class="comments">;- Return result to caller</span>
   return, result

END
</code>
    </div>
  </body>
</html>