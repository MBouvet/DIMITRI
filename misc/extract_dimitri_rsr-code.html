<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Thu Jul  4 16:01:44 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>extract_dimitri_rsr.pro (Documentation for /home/marrabld/projects/DIMITRI_2.0/Source/)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="extract_dimitri_rsr.pro (Documentation for /home/marrabld/projects/DIMITRI_2.0/Source/)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><span class="comments">;**************************************************************************************</span>
<span class="comments">;**************************************************************************************</span>
<span class="comments">;*</span>
<span class="comments">;* NAME:</span>
<span class="comments">;*      EXTRACT_DIMITRI_RSR    </span>
<span class="comments">;* </span>
<span class="comments">;* PURPOSE:</span>
<span class="comments">;*      THIS FUNCTION INTERPOLATES A GIVEN RSR ARRAY TO 0.5NM INTERVALS AND THEN </span>
<span class="comments">;*      EXTRACTS THE DATA TO A PREDEFINED WAVELENGTH RANGE</span>
<span class="comments">;*</span>
<span class="comments">;* CALLING SEQUENCE:</span>
<span class="comments">;*      RES = EXTRACT_DIMITRI_RSR(DATA,WL_ARRAY)</span>
<span class="comments">;* </span>
<span class="comments">;* INPUTS:</span>
<span class="comments">;*      DATA      - A STRUCTURE CONTAINING .(0): THE DATA WAVELENGTHS, AND </span>
<span class="comments">;*                  .(1): THE DATA TO BE INTERPOLATED</span>
<span class="comments">;*      WL_ARRAY  - A FLOAT ARRAY OF THE WAVELENGTHS THE DATA SHOULD BE EXTRACTED FOR </span>
<span class="comments">;*                  (AT AN INTERVAL OF 0.5 NM)</span>
<span class="comments">;*</span>
<span class="comments">;* KEYWORDS:</span>
<span class="comments">;*      VERBOSE   - PROCESSING STATUS OUTPUTS</span>
<span class="comments">;*</span>
<span class="comments">;* OUTPUTS:</span>
<span class="comments">;*      NEW_RSR   - THE INTERPOLATED DATA AT WAVELENGTHS OF WL_ARRAY</span>
<span class="comments">;*</span>
<span class="comments">;* COMMON BLOCKS:</span>
<span class="comments">;*      NONE</span>
<span class="comments">;*</span>
<span class="comments">;* MODIFICATION HISTORY:</span>
<span class="comments">;*      30 MAR 2011 - C KENT   - DIMITRI-2 V1.0</span>
<span class="comments">;*</span>
<span class="comments">;* VALIDATION HISTORY:</span>
<span class="comments">;*      14 APR 2011 - C KENT   - WINDOWS 32-BIT IDL 7.1 AND LINUX 64-BIT IDL 8.0 NOMINAL</span>
<span class="comments">;*                               COMPILATION AND OPERATION </span>
<span class="comments">;*</span>
<span class="comments">;**************************************************************************************</span>
<span class="comments">;**************************************************************************************</span>

FUNCTION EXTRACT_DIMITRI_RSR,DATA,WL_ARRAY,VERBOSE=VERBOSE

<span class="comments">;----------------------------</span>
<span class="comments">; RETRIEVE RANGE OF DATA PROVIDED</span>

  IF KEYWORD_SET(VERBOSE) THEN PRINT,'EXTRACT_DIMITRI_RSR: COMPUTING LIMITS OF SUPPLIED DATA'
  D_MIN = FIX(MIN(DATA.(0)))
  D_MAX = FIX(MAX(DATA.(0)))
  W_MIN = MIN(WL_ARRAY)
  W_MAX = MAX(WL_ARRAY)

<span class="comments">;----------------------------</span>
<span class="comments">; COMPUTE NEW WAVELENGTH ARRAY </span>
<span class="comments">; AND INTEPROLATE DATA TO IT</span>

  IF KEYWORD_SET(VERBOSE) THEN PRINT,'EXTRACT_DIMITRI_RSR: COMPUTING NEW WAVELENGTH ARRAY'
  NEW_WL    = 0.5*FINDGEN((D_MAX-D_MIN)/0.5)+D_MIN
  NEW_DATA  = INTERPOL(DATA.(1),DATA.(0),NEW_WL)
  NEW_NUM   = N_ELEMENTS(NEW_WL)

  NWL     = N_ELEMENTS(WL_ARRAY)
  NEW_RSR = FLTARR(NWL)

<span class="comments">;----------------------------</span>
<span class="comments">; CHECK DATA ARRAYS OVERLAP</span>

  IF W_MIN GT D_MAX OR W_MAX LT D_MIN THEN RETURN,NEW_RSR

<span class="comments">;----------------------------</span>
<span class="comments">; FIND WHERE THE START WL IS IN THE DATA ARRAY</span>

  IF KEYWORD_SET(VERBOSE) THEN PRINT,'EXTRACT_DIMITRI_RSR: LOCATING FIRST COMMON WAVELENGTH'
  FOR I=0,NEW_NUM-1 DO BEGIN
    RES = WHERE(WL_ARRAY EQ NEW_WL[I])
    IF RES[0] GT -1 THEN BEGIN
      SLOC = RES[0]
      SRSR = I
      GOTO, BREAK_LOOP1
    ENDIF
  ENDFOR
  IF I EQ NEW_NUM THEN RETURN,NEW_RSR 
  BREAK_LOOP1:

<span class="comments">;----------------------------</span>
<span class="comments">; FIND WHERE THE LAST WL IS IN THE DATA ARRAY</span>
  
  IF KEYWORD_SET(VERBOSE) THEN PRINT,'EXTRACT_DIMITRI_RSR: LOCATING LAST COMMON WAVELENGTH'  
  RES = WHERE(WL_ARRAY EQ NEW_WL[NEW_NUM-1])
  IF RES[0] GT -1 THEN BEGIN
    ERSR = NEW_NUM-1
    ELOC = RES[0]
  ENDIF ELSE BEGIN
    RES = WHERE(NEW_WL EQ WL_ARRAY[NWL-1])
    ERSR = RES[0]
    ELOC = NWL-1
  ENDELSE

<span class="comments">;----------------------------</span>
<span class="comments">; EXTRACT SECTION OF INTERPOLATED DATA</span>

  IF KEYWORD_SET(VERBOSE) THEN PRINT,'EXTRACT_DIMITRI_RSR: EXTRACTING ALL COMMON WAVELENGTHS'
  NEW_RSR[SLOC:ELOC] = NEW_DATA[SRSR:ERSR]
  RETURN,NEW_RSR
  
END
</code>
    </div>
  </body>
</html>