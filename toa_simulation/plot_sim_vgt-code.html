<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Thu Jul  4 16:01:54 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>plot_sim_vgt.pro (Documentation for /home/marrabld/projects/DIMITRI_2.0/Source/)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="plot_sim_vgt.pro (Documentation for /home/marrabld/projects/DIMITRI_2.0/Source/)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><span class="comments">;**************************************************************************************</span>
<span class="comments">;**************************************************************************************</span>
<span class="comments">;*</span>
<span class="comments">;* NAME:</span>
<span class="comments">;*      PLOT_SIM_VGT </span>
<span class="comments">;* </span>
<span class="comments">;* PURPOSE:</span>
<span class="comments">;*      THIS FUNCTION PLOTS THE OPERATIONAL AND SIMULATED VEGETATION RHO DATA</span>
<span class="comments">;*</span>
<span class="comments">;* CALLING SEQUENCE:</span>
<span class="comments">;*      RES = PLOT_SIM_VGT(SL_FOLDER,VGT_DATA,SIM_DATA)</span>
<span class="comments">;* </span>
<span class="comments">;* INPUTS:</span>
<span class="comments">;*      SL_FOLDER - A STRING OF THE FULL OUTPUT PATH</span>
<span class="comments">;*      VGT_DATA  - A DATA ARRAY OF VGT VALUES (INCLUDING TIME,VZA,VAA,SZA,VAA)</span>
<span class="comments">;*      SIM_DATA  - A DATA ARRAY OF SIMULATED VALUES (INCLUDING TIME,VZA,VAA,SZA,VAA)</span>
<span class="comments">;*</span>
<span class="comments">;* KEYWORDS:</span>
<span class="comments">;*      VERBOSE   - PROCESSING STATUS OUTPUTS</span>
<span class="comments">;*</span>
<span class="comments">;* OUTPUTS:</span>
<span class="comments">;*      STATUS    - THE OUTPUT PROCESSING STATUS</span>
<span class="comments">;*</span>
<span class="comments">;* COMMON BLOCKS:</span>
<span class="comments">;*      NONE</span>
<span class="comments">;*</span>
<span class="comments">;* MODIFICATION HISTORY:</span>
<span class="comments">;*      20 APR 2011 - C KENT   - DIMITRI-2 V1.0</span>
<span class="comments">;*      30 SEP 2011 - C KENT   - UPDATED NUM NON REFS</span>
<span class="comments">;*</span>
<span class="comments">;* VALIDATION HISTORY:</span>
<span class="comments">;*      </span>
<span class="comments">;*</span>
<span class="comments">;**************************************************************************************</span>
<span class="comments">;**************************************************************************************</span>

FUNCTION PLOT_SIM_VGT,SL_FOLDER,VGT_DATA,SIM_DATA,VERBOSE=VERBOSE

<span class="comments">;-----------------------</span>
<span class="comments">; DEFINE OUTPUT JPG AND PARAMETERS</span>

  OUT_JPEG = SL_FOLDER+'VGT_SIM_RHO.JPG'
  NUM_NON_REF=5+12
  DIMS = SIZE(VGT_DATA)
  NB_BANDS = 4
  IF KEYWORD_SET(VERBOSE) THEN PRINT, 'PLOT_SIM_VGT: OUTPUT JPEG FILE - ',OUT_JPEG

<span class="comments">;-----------------------</span>
<span class="comments">; GET CURRENT DEVICE TYPE</span>

  IF KEYWORD_SET(VERBOSE) THEN PRINT, 'PLOT_SIM_VGT: CHANGING TO THE ZBUFFER'
  MACHINE_WINDOW = !D.NAME
  SET_PLOT, 'Z'
  DEVICE, SET_RESOLUTION=[700,400],SET_PIXEL_DEPTH=24
  ERASE  
  DEVICE, DECOMPOSED = 0
  LOADCT, 39

<span class="comments">;-----------------------</span>
<span class="comments">; DEFINE YRANGE AND XRANGE</span>
  
  IF KEYWORD_SET(VERBOSE) THEN PRINT, 'PLOT_SIM_VGT: DEFINING PLOT PARAMETERS'
  YRANGE = [0.0,1.0]
  XRANGE = [MIN(VGT_DATA[0,*]),MAX(VGT_DATA[0,*])]
  TEMPX = VGT_DATA[0,*]

<span class="comments">;-----------------------</span>
<span class="comments">; DEFINE THE COLOURS</span>
  
  BAND_COLOURS = [50,150,200,250]
  LNAME = STRARR(NB_BANDS)

<span class="comments">;-----------------------</span>
<span class="comments">; CREATE THE PLOT</span>

  IF KEYWORD_SET(VERBOSE) THEN PRINT, 'PLOT_SIM_VGT: CREATING THE PLOT'
  PLOT,TEMPX,VGT_DATA[NUM_NON_REF,*],COLOR=0,BACKGROUND=255,/NODATA,$
    TITLE   = 'VGT VS VGT (SIMULATED)',$
    YTITLE  = 'TOA RHO (DL)',$
    XTITLE  = 'DATE'

<span class="comments">;-----------------------</span>
<span class="comments">; LOOP OVER EACH BAND AND PLOT DATA </span>

  IF KEYWORD_SET(VERBOSE) THEN PRINT, 'PLOT_SIM_VGT: STARTING LOOP OVER EACH BAND'
  FOR PBAND=0,NB_BANDS-1 DO BEGIN
  
    TBAND = CONVERT_INDEX_TO_WAVELENGTH(PBAND,'VEGETATION')
    LNAME[PBAND] = TBAND
  
    TMP = WHERE(VGT_DATA[NUM_NON_REF+PBAND,*] GT 0.0,COUNT)
    IF COUNT GT 0 THEN OPLOT,TEMPX[TMP],VGT_DATA[NUM_NON_REF+PBAND,TMP],COLOR=BAND_COLOURS[PBAND] 
 
    TMP = WHERE(SIM_DATA[*,NUM_NON_REF+PBAND] GT 0.0,COUNT)
    IF COUNT GT 0 THEN OPLOT,TEMPX[TMP],SIM_DATA[TMP,NUM_NON_REF+PBAND],COLOR=BAND_COLOURS[PBAND],PSYM=2  
    
  ENDFOR
  <span class="comments">;LEGEND,LNAME,COLOR=BAND_COLOURS,/RIGHT</span>

<span class="comments">;-----------------------</span>
<span class="comments">; SAVE THE PLOT</span>

  IF KEYWORD_SET(VERBOSE) THEN PRINT, 'PLOT_SIM_VGT: SAVING THE PLOT'
  TEMP = TVRD(TRUE=1)
  WRITE_JPEG,OUT_JPEG,TEMP,TRUE=1,QUALITY=100
  ERASE
  SET_PLOT, MACHINE_WINDOW
  RETURN,1

END
</code>
    </div>
  </body>
</html>