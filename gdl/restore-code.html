<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Thu Jul  4 16:01:36 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>restore.pro (Documentation for /home/marrabld/projects/DIMITRI_2.0/Source/)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="restore.pro (Documentation for /home/marrabld/projects/DIMITRI_2.0/Source/)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><span class="comments">;+</span>
<span class="comments">; NAME: RESTORE</span>
<span class="comments">;</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;       Serves as a wrapper around CMSAVE from Craig B. Markwardt CMVSLIB</span>
<span class="comments">;       library. You must download and install yourself this CMVSLIB library</span>
<span class="comments">;       then add it PATH in your GDL_PATH. This library can be found here:</span>
<span class="comments">;       http://cow.physics.wisc.edu/~craigm/idl/cmsave.html</span>
<span class="comments">;</span>
<span class="comments">; MODIFICATION HISTORY:</span>
<span class="comments">;   01-Sep-2006 : written by Joel Gales</span>
<span class="comments">;   15-dec-2006 : by Alain Coulais (AC)</span>
<span class="comments">;      1/ explicite HTTP link in header to external CMVSLIB library</span>
<span class="comments">;      2/ test via EXECUTE() in pro to warn new users for missing</span>
<span class="comments">;                   external CMVSLIB library</span>
<span class="comments">;   12-feb-2007: modifications by AC: </span>
<span class="comments">;      1a/ managing filename.</span>
<span class="comments">;      1b/ default filename if no filename provided (see CMSAVE) </span>
<span class="comments">;      2/ add keyword /verbose ... (but bug in CMRESTORE (2 time print !))</span>
<span class="comments">;      3/ warning for 3 keywords not managed yet</span>
<span class="comments">;   13-Nov-2012: modifications by AC:</span>
<span class="comments">;      1/ feature request 3581835</span>
<span class="comments">;      2/ proper STRING conversion of input file name</span>
<span class="comments">;      3/ extra keywords /help and /test</span>
<span class="comments">;</span>
<span class="comments">; LICENCE:</span>
<span class="comments">; Copyright (C) 2006-2012, J. Gales and A. Coulais</span>
<span class="comments">; This program is free software; you can redistribute it and/or modify</span>
<span class="comments">; it under the terms of the GNU General Public License as published by</span>
<span class="comments">; the Free Software Foundation; either version 2 of the License, or</span>
<span class="comments">; (at your option) any later version.</span>
<span class="comments">;</span>
<span class="comments">;-</span>
<a id="RESTORE:source"></a>pro RESTORE, filename0, filename=filename1, $
             RELAXED_STRUCTURE_ASSIGNMENT=RELAXED_STRUCTURE_ASSIGNMENT, $
             DESCRIPTION=DESCRIPTION, RESTORED_OBJECTS=RESTORED_OBJECTS, $
             help=help, verbose=verbose, test=test
ON_ERROR, 2
<span class="comments">;</span>
if KEYWORD_SET(help) then begin
    print, 'pro RESTORE, filename0, filename=filename1'
    print, '             RELAXED_STRUCTURE_ASSIGNMENT=RELAXED_STRUCTURE_ASSIGNMENT, $'
    print, '             DESCRIPTION=DESCRIPTION, RESTORED_OBJECTS=RESTORED_OBJECTS, $'
    print, '             help=help, verbose=verbose, test=test'
    return
end
<span class="comments">;</span>
if (EXECUTE('res=CMSVLIB(/QUERY)') EQ 0) then begin
    MESSAGE, /CONTINUE, "Missing CMSVlib in your GDL_PATH or IDL_PATH"
    MESSAGE, /CONTINUE, "please read RESTORE header for help."
    return
endif
<span class="comments">;</span>
<span class="comments">; not available KEYWORDs (compatibility reasons)</span>
<span class="comments">;</span>
if (N_ELEMENTS(RELAXED_STRUCTURE_ASSIGNMENT) GT 0) then begin
    print, "% RESTORE: keyword RELAXED_STRUCTURE_ASSIGNMENT not managed"
endif
<span class="comments">;</span>
if (N_ELEMENTS(DESCRIPTION) GT 0) then begin
    print, "% RESTORE: keyword DESCRIPTION not managed"
endif
<span class="comments">;</span>
if (N_ELEMENTS(RESTORED_OBJECTS) GT 0) then begin
    print, "% RESTORE: keyword RESTORED_OBJECTS not managed"
endif
<span class="comments">;</span>
<span class="comments">; what is the effective filename ?</span>
<span class="comments">;</span>
if (N_ELEMENTS(filename0) EQ 0) AND (N_ELEMENTS(filename1) EQ 0) then begin
    <span class="comments">;; filename set by default</span>
    filename = 'cmsave.sav'
    print, "% RESTORE: default FILENAME is used : ", filename
endif else begin
    <span class="comments">;; when f0 and f1 are both provided, param f0 is used ...</span>
    if (N_ELEMENTS(filename1) GT 0) then filename=filename1
    if (N_ELEMENTS(filename0) GT 0) then filename=filename0
    <span class="comments">;;</span>
    <span class="comments">;; one and only one file at a time</span>
    if (N_ELEMENTS(filename) GT 1) then begin
        txt = "Expression must be a scalar or 1 element array in this context: "
        HELP, filename, out=out
        mess='&lt;'+STRTRIM(STRMID(out, STRLEN('filename')),2)+'>'
        MESSAGE, txt + mess
    endif
    <span class="comments">;;</span>
    <span class="comments">;; Can we convert the "filename" into a true string ...</span>
    res=EXECUTE('tmp_name=STRING(filename)')
    if (res EQ 0) then begin
        return
    endif else begin
        filename=tmp_name
    endelse
    <span class="comments">;;</span>
endelse
<span class="comments">;</span>
<span class="comments">; we check whether the file is here or not ...</span>
<span class="comments">;</span>
if (FILE_TEST(filename) NE 1) then begin
    MESSAGE, "FILE not found : "+filename
endif
<span class="comments">;</span>
CMRESTORE, filename, verbose=verbose, names=_nme_, $
  data=data, pass_method='struct'
<span class="comments">;</span>
for i = 0, N_ELEMENTS(_nme_) - 1 do begin
    dummy = ROUTINE_NAMES(_nme_[i], data.(i), store=-1)
endfor
<span class="comments">;</span>
if KEYWORD_SET(test) then STOP
<span class="comments">;</span>
end

</code>
    </div>
  </body>
</html>